webpackJsonp([1],{"6ces":function(e,t){},"7SR+":function(e,t){},DTES:function(e,t){},FEKn:function(e,t){},IDdh:function(e,t){},Iyuk:function(e,t,n){e.exports=n.p+"static/img/background-image.b1fb632.jpg"},LSwd:function(e,t){},MoLD:function(e,t){e.exports={_from:"hydrogen-js-sdk",_id:"hydrogen-js-sdk@2.2.0",_inBundle:!1,_integrity:"sha1-Sai50tJjwdR/tUBS17dBHv9prW0=",_location:"/hydrogen-js-sdk",_phantomChildren:{},_requested:{type:"tag",registry:!0,raw:"hydrogen-js-sdk",name:"hydrogen-js-sdk",escapedName:"hydrogen-js-sdk",rawSpec:"",saveSpec:null,fetchSpec:"latest"},_requiredBy:["#USER","/"],_resolved:"https://registry.npm.taobao.org/hydrogen-js-sdk/download/hydrogen-js-sdk-2.2.0.tgz",_shasum:"49a8b9d2d263c1d47fb54052d7b7411eff69ad6d",_spec:"hydrogen-js-sdk",_where:"F:\\web_yyxxxt\\web_xxxt",author:{name:"Bmob"},bugs:{url:"https://github.com/bmob/hydrogen-js-sdk/issues"},bundleDependencies:!1,dependencies:{"babel-runtime":"^6.26.0","node.extend":"^2.0.0",webpack:"^3.12.0"},deprecated:!1,description:"Bmob SDK",devDependencies:{"babel-core":"^6.26.3","babel-loader":"^7.1.5","babel-plugin-transform-runtime":"^6.23.0","babel-preset-es2015":"^6.24.1","clean-webpack-plugin":"^0.1.19",eslint:"^4.19.1","eslint-config-standard":"^11.0.0","eslint-friendly-formatter":"^4.0.1","eslint-loader":"^2.0.0","eslint-plugin-import":"^2.12.0","eslint-plugin-node":"^6.0.1","eslint-plugin-promise":"^3.7.0","eslint-plugin-standard":"^3.1.0","html-webpack-plugin":"^2.30.1","uglifyjs-webpack-plugin":"^1.2.5","webpack-dev-server":"^2.11.2"},directories:{doc:"docs"},homepage:"https://github.com/bmob/hydrogen-js-sdk#readme",keywords:["Bmob"],license:"ISC",main:"./src/lib/app.js",name:"hydrogen-js-sdk",repository:{type:"git",url:"git+https://github.com/bmob/hydrogen-js-sdk.git"},scripts:{build:"webpack --config config/prod.env.js",dev:"webpack-dev-server --config config/dev.env.js",test:'echo "Error: no test specified" && exit 1',watch:"webpack --watch --config config/prod.env.js"},version:"2.2.0"}},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("7+uW"),a={render:function(){var e=this.$createElement;return(this._self._c||e)("router-view")},staticRenderFns:[]};var i=n("VU/8")({name:"App"},a,!1,function(e){n("FEKn")},null,null).exports,l=n("/ocq"),s=n("sjsR"),r=n("ogWm"),c=n.n(r),u={data:function(){return{img:n("Iyuk"),ifLogin:!1,loginForm:{username:"",password:""},loginRule:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{submit:function(e){var t=this;this.$refs.loginForm.validate(function(e){if(!e)return console.log("err"),!1;c.a.User.login(t.loginForm.username,t.loginForm.password).then(function(e){console.log("login",e),t.ifLogin=!1,t.$router.push({path:"/"}),sessionStorage.setItem("user",t.loginForm.username),sessionStorage.setItem("token",e.userToken),console.log("userToken",e.userToken)}).catch(function(e){console.log(e),t.ifLogin=!1,alert("用户名或密码有误！")})})}}},d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"loginContainer"},[n("el-form",{ref:"loginForm",staticClass:"loginBox",attrs:{model:e.loginForm,rules:e.loginRule}},[n("div",{staticClass:"text"},[n("p",[e._v("医 院 信 息 系 统")])]),e._v(" "),n("el-form-item",{attrs:{prop:"username"}},[n("el-input",{attrs:{type:"text",placeholder:"用户名"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"password"}},[n("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),n("el-form-item",[n("div",{staticClass:"loginBtn"},[n("el-button",{attrs:{loading:e.ifLogin},on:{click:e.submit}},[e._v("登录")])],1)])],1)],1)])},staticRenderFns:[]};var f=n("VU/8")(u,d,!1,function(e){n("c+o/")},"data-v-047b6c1c",null).exports,g={data:function(){return{username:"user",active:"register",ifMedicine:!0,ifRegister:!0,ifDoctor:!0}},methods:{handleOpen:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)},logout:function(){var e=this;this.$confirm("退出登录？","提示",{}).then(function(){sessionStorage.removeItem("user"),e.$router.push("/login")}).catch(function(){})},tokenJudgement:function(){var e=sessionStorage.getItem("user"),t=sessionStorage.getItem("token");this.username=e,console.log("container.token",t),"3"===t?(this.ifRegister=!1,this.ifDoctor=!1,this.ifMedicine=!0):"1"===t?(this.ifRegister=!0,this.ifDoctor=!1,this.ifMedicine=!1):(this.ifRegister=!1,this.ifDoctor=!0,this.ifMedicine=!1),console.log("ifRegister",this.ifRegister)},ifLogin:function(){null===sessionStorage.getItem("token")&&this.$router.push({path:"/login"})}},mounted:function(){this.tokenJudgement(),this.ifLogin()}},m={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("el-container",{staticClass:"allContainer"},[n("el-aside",{staticStyle:{width:"200px","background-color":"#158998","min-height":"600px",overflow:"hidden"}},[n("el-menu",{staticClass:"el-menu-vertical-demo",staticStyle:{width:"200px"},attrs:{router:"","background-color":"#158998","text-color":"#a8a8a8","active-text-color":"#fff"},on:{open:e.handleOpen,close:e.handleClose}},[e.ifRegister?n("el-menu-item",{attrs:{index:"register"}},[n("i",{staticClass:"el-icon-menu"}),e._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("挂号管理")])]):e._e(),e._v(" "),e.ifRegister?n("el-submenu",{attrs:{index:"registerQuery"}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-menu"}),e._v(" "),n("span",[e._v("查询统计")])]),e._v(" "),e._e(),e._v(" "),e.ifRegister?n("el-menu-item",{attrs:{index:"doctorWork"}},[n("i",{staticClass:"el-icon-menu"}),e._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("医生工作量")])]):e._e(),e._v(" "),e.ifRegister?n("el-menu-item",{attrs:{index:"officeWork"}},[n("i",{staticClass:"el-icon-menu"}),e._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("科室工作量")])]):e._e()],2):e._e(),e._v(" "),e.ifRegister?n("el-submenu",{attrs:{index:"registerData"}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-menu"}),e._v(" "),n("span",[e._v("基础数据")])]),e._v(" "),e.ifRegister?n("el-menu-item",{attrs:{index:"officeInfo"}},[n("i",{staticClass:"el-icon-menu"}),e._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("科室信息")])]):e._e(),e._v(" "),e.ifRegister?n("el-menu-item",{attrs:{index:"doctorInfo"}},[n("i",{staticClass:"el-icon-menu"}),e._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("医生信息")])]):e._e()],2):e._e(),e._v(" "),e.ifRegister?n("el-menu-item",{attrs:{index:"registerPay"}},[n("i",{staticClass:"el-icon-menu"}),e._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("处方缴费")])]):e._e(),e._v(" "),e.ifMedicine?n("el-menu-item",{attrs:{index:"management"}},[n("i",{staticClass:"el-icon-menu"}),e._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("药房管理")])]):e._e(),e._v(" "),e.ifMedicine?n("el-menu-item",{attrs:{index:"dose"}},[n("i",{staticClass:"el-icon-menu"}),e._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("门诊发药")])]):e._e(),e._v(" "),e.ifDoctor?n("el-menu-item",{attrs:{index:"queue"}},[n("i",{staticClass:"el-icon-menu"}),e._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[e._v("病人队列")])]):e._e(),e._v(" "),e._e()],1)],1),e._v(" "),n("el-container",{staticClass:"left-container"},[n("el-header",{staticClass:"app-header",staticStyle:{height:"40px"}},[n("el-dropdown",{attrs:{size:"small"}},[n("span",{staticClass:"el-dropdown-link"},[e._v("\r\n            "+e._s(e.username)),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(t){return e.logout(t)}}},[e._v("退出登录")])],1)],1)],1),e._v(" "),n("el-main",[[n("router-view")]],2)],1)],1)],1)},staticRenderFns:[]};var h=n("VU/8")(g,m,!1,function(e){n("DTES")},null,null).exports,p={data:function(){return{allPage:1,searchInput:"",ifExist:0,getTableData:0,input:"",tableData:[],filterData:[],loading2:!1,pageSize:6,currentPage:1,totalPage:1,dialogVisible:!1,price:"",changeDialogVisible:!1,changeMedicine:"",changeNum:"",changeId:"",form:{medicine:"",id:""}}},watch:{searchInput:function(){""===this.searchInput&&(this.tableData=this.filterData,this.totalPage=this.allPage)}},mounted:function(){this.getMedicine()},methods:{getMedicine:function(){var e=this;this.loading2=!0,c.a.Query("medicine").get("").then(function(t){console.log(t),e.tableData=t.results.reverse(),e.totalPage=t.results.length,e.filterData=t.results,e.allPage=t.results.length,setTimeout(function(){e.loading2=!1},1e3)}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){this.currentPage=e},addMedicine:function(){var e=this,t=c.a.Query("medicine");t.get("").then(function(n){e.getTableData=n.results.length;for(var o=0;o<e.getTableData;o++)if(e.form.medicine===n.results[o].medName){e.$message({message:"该药品已添加！",type:"warning"}),e.ifExist=1,e.form.medicine="",e.form.number="",e.form.price="";break}0===e.ifExist&&(t.set("medName",e.form.medicine),t.set("price",e.form.price),t.set("medNum",parseInt(e.form.number)),t.save().then(function(t){console.log(t),e.dialogVisible=!1,e.form.medicine="",e.form.number="",e.form.price="",e.getMedicine()}).catch(function(e){console.log(e)}))})},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},delMedicine:function(e){var t=this;this.$confirm("确认删除？").then(function(n){c.a.Query("medicine").destroy(e.row.objectId).then(function(e){console.log(e),t.getMedicine()}).catch(function(e){console.log(e)})}).catch(function(e){})},alertMedicine:function(e){var t=this;this.changeDialogVisible=!0,c.a.Query("medicine").get(e.row.objectId).then(function(e){t.changeId=e.objectId,t.changeMedicine=e.medName,t.changeNum=e.medNum,t.price=e.price}).catch(function(e){console.log(e)})},correctMedicine:function(){var e=this,t=c.a.Query("medicine");t.set("id",this.changeId),t.set("medName",this.changeMedicine),t.set("medNum",parseInt(this.changeNum)),t.set("price",this.price),t.save().then(function(t){console.log(t),e.changeDialogVisible=!1,e.getMedicine()}).catch(function(e){console.log(e)})},search:function(){var e=this,t=c.a.Query("medicine");t.containedIn("medName",[this.searchInput]),t.find().then(function(t){e.tableData=t,e.totalPage=t.length})}}},v={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.8)"}},[n("div",{staticClass:"underHeader"},[n("el-button",{on:{click:function(t){e.dialogVisible=!0}}},[e._v("录 入")]),e._v(" "),n("el-dialog",{attrs:{title:"录入药品",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",[n("el-form-item",{attrs:{label:"药品名称："}},[n("el-input",{attrs:{placeholder:"请输入药品名称",size:"medium"},model:{value:e.form.medicine,callback:function(t){e.$set(e.form,"medicine",t)},expression:"form.medicine"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"药品单价："}},[n("el-input",{attrs:{placeholder:"请输入药品单价",size:"medium"},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"药品剂量数："}},[n("el-input",{attrs:{placeholder:"请输入药品剂量数",size:"medium"},model:{value:e.form.number,callback:function(t){e.$set(e.form,"number",t)},expression:"form.number"}})],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.addMedicine}},[e._v("录 入")]),e._v(" "),n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")])],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"修改药品",visible:e.changeDialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.changeDialogVisible=t}}},[n("el-form",[n("el-form-item",{attrs:{label:"药品名称："}},[n("el-input",{attrs:{placeholder:"请输入药品名称",size:"medium"},model:{value:e.changeMedicine,callback:function(t){e.changeMedicine=t},expression:"changeMedicine"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"药品单价："}},[n("el-input",{attrs:{placeholder:"请输入药品单价",size:"medium"},model:{value:e.price,callback:function(t){e.price=t},expression:"price"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"药品剂量数："}},[n("el-input",{attrs:{placeholder:"请输入药品剂量数",size:"medium"},model:{value:e.changeNum,callback:function(t){e.changeNum=t},expression:"changeNum"}})],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.correctMedicine}},[e._v("修 改")]),e._v(" "),n("el-button",{on:{click:function(t){e.changeDialogVisible=!1}}},[e._v("取 消")])],1)],1),e._v(" "),n("span",[n("el-input",{attrs:{placeholder:"请输入要搜索的药品名",size:"medium","prefix-icon":"el-icon-search"},model:{value:e.searchInput,callback:function(t){e.searchInput=t},expression:"searchInput"}}),e._v(" "),n("el-button",{on:{click:e.search}},[e._v("搜索")])],1)],1),e._v(" "),n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),align:"center",border:""}},[n("el-table-column",{attrs:{align:"center",prop:"medName",label:"药品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.medName))]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",prop:"price",label:"单价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.price))]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",prop:"medNum",label:"库存"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.medNum))]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"btnBox"},[n("el-button",{attrs:{size:"small"},on:{click:function(n){return e.alertMedicine(t)}}},[e._v("修改")]),e._v(" "),n("el-button",{attrs:{size:"small"},on:{click:function(n){return e.delMedicine(t)}}},[e._v("删除")])],1)]}}])})],1)],1),e._v(" "),n("div",{staticClass:"paginationBox"},[n("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.totalPage,"page-size":e.pageSize,"current-page":e.currentPage},on:{"current-change":e.handleCurrentChange}})],1)])},staticRenderFns:[]};var b=n("VU/8")(p,v,!1,function(e){n("k7vy")},null,null).exports,_={data:function(){return{allPage:1,searchInput:"",input:"",tableData:[],filterData:[],loading2:!1,pageSize:6,currentPage:1,totalPage:1,dialogVisible:!1,changeNum:"",neikePerson:0,waikePerson:0,fuchankePerson:0,nankePerson:0,erkePerson:0,wuguankePerson:0,zhongliukePerson:0,pifuxingbingkePerson:0,zhongyikePerson:0,chuanrankePerson:0,jingshenkePerson:0,form:{name:"",diseaseType:"",office:"",doctor:""}}},watch:{searchInput:function(){""===this.searchInput&&(this.tableData=this.filterData,this.totalPage=this.allPage)}},mounted:function(){this.getPatient()},methods:{getPatient:function(){var e=this;this.loading2=!0,c.a.Query("patient").get("").then(function(t){console.log(t),e.tableData=t.results.reverse(),e.totalPage=t.results.length,e.filterData=t.results,e.allPage=t.results.length,setTimeout(function(){e.loading2=!1},1e3)}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){this.currentPage=e},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},search:function(){var e=this,t=c.a.Query("patient");t.containedIn("name",[this.searchInput]),t.find().then(function(t){e.tableData=t,e.totalPage=t.length})},toDoseplace:function(e){console.log("the scope",e),this.patientId=e.row.objectId,console.log("id",this.patientId),this.$router.push({path:"dosePlace",query:{patientId:this.patientId}})}}},k={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.8)"}},[n("div",{staticClass:"underHeader"},[n("span",[n("el-input",{attrs:{placeholder:"请输入要搜索的病人姓名",size:"medium","prefix-icon":"el-icon-search"},model:{value:e.searchInput,callback:function(t){e.searchInput=t},expression:"searchInput"}}),e._v(" "),n("el-button",{on:{click:e.search}},[e._v("搜索")])],1)]),e._v(" "),n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),align:"center",border:""}},[n("el-table-column",{attrs:{align:"center",prop:"name",label:"病人姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.name))]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"是否已发药",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{attrs:{"active-text":"已发药","inactive-text":"未发药","inactive-value":"-1","active-value":"1",disabled:""},model:{value:t.row.ifDose,callback:function(n){e.$set(t.row,"ifDose",n)},expression:"scope.row.ifDose"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"btnBox"},[n("el-button",{attrs:{size:"small"},on:{click:function(n){return e.toDoseplace(t)}}},[e._v("发药")])],1)]}}])})],1)],1),e._v(" "),n("div",{staticClass:"paginationBox"},[n("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.totalPage,"page-size":e.pageSize,"current-page":e.currentPage},on:{"current-change":e.handleCurrentChange}})],1)])},staticRenderFns:[]};var y=n("VU/8")(_,k,!1,function(e){n("O2RU")},"data-v-fc3fd6f0",null).exports,P={data:function(){return{doctorInOffice:[],getDoctorName:"",nowPatientNum:0,saveId:"",allPage:1,searchInput:"",input:"",tableData:[],filterData:[],loading2:!1,pageSize:6,currentPage:1,totalPage:1,dialogVisible:!1,changeNum:"",neikePerson:0,waikePerson:0,fuchankePerson:0,nankePerson:0,erkePerson:0,wuguankePerson:0,zhongliukePerson:0,pifuxingbingkePerson:0,zhongyikePerson:0,chuanrankePerson:0,jingshenkePerson:0,options:[{value:"内科",label:"内科"},{value:"外科",label:"外科"},{value:"妇产科",label:"妇产科"},{value:"男科",label:"男科"},{value:"儿科",label:"儿科"},{value:"五官科",label:"五官科"},{value:"肿瘤科",label:"肿瘤科"},{value:"皮肤性病科",label:"皮肤性病科"},{value:"中医科",label:"中医科"},{value:"传染科",label:"传染科"}],form:{name:"",diseaseType:"",office:"",doctor:""}}},watch:{searchInput:function(){""===this.searchInput&&(this.tableData=this.filterData,this.totalPage=this.allPage)},getDoctorName:function(){var e=this,t=c.a.Query("officeName");"内科"===this.getDoctorName&&t.get("AC6tEEEQ").then(function(t){e.doctorInOffice=t.doctors}).catch(function(e){console.log(e)}),"外科"===this.getDoctorName&&t.get("da2P777s").then(function(t){e.doctorInOffice=t.doctors}).catch(function(e){console.log(e)}),"妇产科"===this.getDoctorName&&t.get("0E853334").then(function(t){e.doctorInOffice=t.doctors}).catch(function(e){console.log(e)}),"男科"===this.getDoctorName&&t.get("NnaD222y").then(function(t){e.doctorInOffice=t.doctors}).catch(function(e){console.log(e)}),"儿科"===this.getDoctorName&&t.get("6d9pYYYb").then(function(t){e.doctorInOffice=t.doctors}).catch(function(e){console.log(e)}),"五官科"===this.getDoctorName&&t.get("atEB5557").then(function(t){e.doctorInOffice=t.doctors}).catch(function(e){console.log(e)}),"肿瘤科"===this.getDoctorName&&t.get("NtAL333t").then(function(t){e.doctorInOffice=t.doctors}).catch(function(e){console.log(e)}),"皮肤性病科"===this.getDoctorName&&t.get("EoJT666L").then(function(t){e.doctorInOffice=t.doctors}).catch(function(e){console.log(e)}),"中医科"===this.getDoctorName&&t.get("pyNc4445").then(function(t){e.doctorInOffice=t.doctors}).catch(function(e){console.log(e)}),"传染科"===this.getDoctorName&&t.get("03Wvdddi").then(function(t){e.doctorInOffice=t.doctors}).catch(function(e){console.log(e)}),"精神科"===this.getDoctorName&&t.get("I40cMMMb").then(function(t){e.doctorInOffice=t.doctors}).catch(function(e){console.log(e)})}},mounted:function(){this.getPatient()},methods:{getPatient:function(){var e=this;this.loading2=!0,c.a.Query("patient").get("").then(function(t){console.log(t),e.tableData=t.results.reverse(),e.totalPage=t.results.length,e.filterData=t.results,e.allPage=t.results.length,setTimeout(function(){e.loading2=!1},1e3)}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){this.currentPage=e},getPersonNum:function(){var e=this,t=c.a.Query("officeName");"内科"===this.getDoctorName&&t.get("AC6tEEEQ").then(function(t){console.log("www",t.personNum),e.neikePerson=t.personNum,t.set("personNum",parseInt(++e.neikePerson)),t.save()}).catch(function(e){console.log(e)}),"外科"===this.getDoctorName&&t.get("da2P777s").then(function(t){e.waikePerson=t.personNum,t.set("personNum",parseInt(++e.waikePerson)),t.save()}).catch(function(e){console.log(e)}),"妇产科"===this.getDoctorName&&t.get("0E853334").then(function(t){e.fuchankePerson=t.personNum,t.set("personNum",parseInt(++e.fuchankePerson)),t.save()}).catch(function(e){console.log(e)}),"男科"===this.getDoctorName&&t.get("NnaD222y").then(function(t){e.nankePerson=t.personNum,t.set("personNum",parseInt(++e.nankePerson)),t.save()}).catch(function(e){console.log(e)}),"儿科"===this.getDoctorName&&t.get("6d9pYYYb").then(function(t){e.erkePerson=t.personNum,t.set("personNum",parseInt(++e.erkePerson)),t.save()}).catch(function(e){console.log(e)}),"五官科"===this.getDoctorName&&t.get("atEB5557").then(function(t){e.wuguankePerson=t.personNum,t.set("personNum",parseInt(++e.wuguankePerson)),t.save()}).catch(function(e){console.log(e)}),"肿瘤科"===this.getDoctorName&&t.get("NtAL333t").then(function(t){e.zhongliukePerson=t.personNum,t.set("personNum",parseInt(++e.zhongliukePerson)),t.save()}).catch(function(e){console.log(e)}),"皮肤性病科"===this.getDoctorName&&t.get("EoJT666L").then(function(t){e.pifuxingbingkePerson=t.personNum,t.set("personNum",parseInt(++e.pifuxingbingkePerson)),t.save()}).catch(function(e){console.log(e)}),"中医科"===this.getDoctorName&&t.get("pyNc4445").then(function(t){e.zhongyikePerson=t.personNum,t.set("personNum",parseInt(++e.zhongyikePerson)),t.save()}).catch(function(e){console.log(e)}),"传染科"===this.getDoctorName&&t.get("03Wvdddi").then(function(t){e.chuanrankePerson=t.personNum,t.set("personNum",parseInt(++e.chuanrankePerson)),t.save()}).catch(function(e){console.log(e)}),"精神科"===this.getDoctorName&&t.get("I40cMMMb").then(function(t){e.jingshenkePerson=t.personNum,t.set("personNum",parseInt(++e.jingshenkePerson)),t.save()}).catch(function(e){console.log(e)})},change:function(){var e=this;c.a.Query("doctorWork").get("").then(function(t){for(var n=0;n<t.results.length;n++){if(e.form.doctor===t.results[n].doctorName)e.saveId=t.results[n].objectId,c.a.Query("doctorWork").get(e.saveId).then(function(t){console.log("which",t),e.nowPatientNum=++t.patientNum,t.set("patientNum",e.nowPatientNum.toString()),t.save(),e.form.doctor=""})}}).catch(function(e){console.log(e)})},addPatient:function(){var e=this;if(this.form.name&&this.form.diseaseType&&this.getDoctorName&&this.form.doctor){this.getPersonNum();var t=c.a.Query("patient");t.get("").then(function(n){e.getTableData=n.results.length,t.set("name",e.form.name),t.set("diseaseType",e.form.diseaseType),t.set("office",e.getDoctorName),t.set("doctor",e.form.doctor),t.save().then(function(t){e.change(),console.log(t),e.dialogVisible=!1,e.form.name="",e.form.diseaseType="",e.getDoctorName="",e.getPatient()}).catch(function(e){console.log(e)})})}else this.$message({showClose:!0,message:"请完善病人信息！",type:"warning"})},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},search:function(){var e=this,t=c.a.Query("patient");t.containedIn("name",[this.searchInput]),t.find().then(function(t){e.tableData=t,e.totalPage=t.length})}}},D={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.8)"}},[n("div",{staticClass:"underHeader"},[n("el-button",{on:{click:function(t){e.dialogVisible=!0}}},[e._v("新增病人")]),e._v(" "),n("el-dialog",{attrs:{title:"新增病人信息",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",[n("el-form-item",{attrs:{label:"病人姓名："}},[n("el-input",{attrs:{placeholder:"请输入病人姓名",size:"medium"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"疾病类型："}},[n("el-input",{attrs:{placeholder:"请输入疾病类型",size:"medium"},model:{value:e.form.diseaseType,callback:function(t){e.$set(e.form,"diseaseType",t)},expression:"form.diseaseType"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"就诊科室："}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.getDoctorName,callback:function(t){e.getDoctorName=t},expression:"getDoctorName"}},e._l(e.options,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"就诊医师："}},[n("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.form.doctor,callback:function(t){e.$set(e.form,"doctor",t)},expression:"form.doctor"}},e._l(e.doctorInOffice,function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.addPatient}},[e._v("录 入")]),e._v(" "),n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")])],1)],1),e._v(" "),n("span",[n("el-input",{attrs:{placeholder:"请输入要搜索的病人姓名",size:"medium","prefix-icon":"el-icon-search"},model:{value:e.searchInput,callback:function(t){e.searchInput=t},expression:"searchInput"}}),e._v(" "),n("el-button",{on:{click:e.search}},[e._v("搜索")])],1)],1),e._v(" "),n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),align:"center",border:""}},[n("el-table-column",{attrs:{align:"center",prop:"name",label:"病人姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.name))]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",prop:"diseaseType",label:"疾病类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.diseaseType))]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"病历号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.objectId))]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"就诊科室"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.office))]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"就诊医师"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.doctor))]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"挂号时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.createdAt))]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"就诊状态",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{attrs:{"active-text":"已接诊","inactive-text":"未接诊","inactive-value":"-1","active-value":"1",disabled:""},model:{value:t.row.state,callback:function(n){e.$set(t.row,"state",n)},expression:"scope.row.state"}})]}}])})],1)],1),e._v(" "),n("div",{staticClass:"paginationBox"},[n("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.totalPage,"page-size":e.pageSize,"current-page":e.currentPage},on:{"current-change":e.handleCurrentChange}})],1)])},staticRenderFns:[]};var N=n("VU/8")(P,D,!1,function(e){n("e491")},"data-v-8de4a106",null).exports,x={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h1",[this._v("registerQuery")])])}]};var I=n("VU/8")(null,x,!1,function(e){n("Xo8t")},null,null).exports,w={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h1",[this._v("registerData")])])}]};var C=n("VU/8")(null,w,!1,function(e){n("uZaE")},null,null).exports,S={data:function(){return{allPage:1,searchInput:"",input:"",tableData:[],filterData:[],loading2:!1,pageSize:6,currentPage:1,totalPage:1,dialogVisible:!1,changeNum:"",neikePerson:0,waikePerson:0,fuchankePerson:0,nankePerson:0,erkePerson:0,wuguankePerson:0,zhongliukePerson:0,pifuxingbingkePerson:0,zhongyikePerson:0,chuanrankePerson:0,jingshenkePerson:0,form:{name:"",diseaseType:"",office:"",doctor:""}}},watch:{searchInput:function(){""===this.searchInput&&(this.tableData=this.filterData,this.totalPage=this.allPage)}},mounted:function(){this.getPatient()},methods:{changeStatus:function(e){var t=this;console.log("state",e.row.ifPay),c.a.Query("patient").get(e.row.objectId).then(function(n){n.set("ifPay",e.row.ifPay),n.save(),t.getPatient()}).catch(function(e){console.log(e)})},getPatient:function(){var e=this;this.loading2=!0,c.a.Query("patient").get("").then(function(t){console.log(t),e.tableData=t.results.reverse(),e.totalPage=t.results.length,e.filterData=t.results,e.allPage=t.results.length,setTimeout(function(){e.loading2=!1},1e3)}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){this.currentPage=e},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},search:function(){var e=this,t=c.a.Query("patient");t.containedIn("name",[this.searchInput]),t.find().then(function(t){e.tableData=t,e.totalPage=t.length})},toPay:function(e){console.log("the scope",e),this.patientId=e.row.objectId,console.log("id",this.patientId),this.$router.push({path:"pay",query:{patientId:this.patientId}})}}},z={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.8)"}},[n("div",{staticClass:"underHeader"},[n("span",[n("el-input",{attrs:{placeholder:"请输入要搜索的病人姓名",size:"medium","prefix-icon":"el-icon-search"},model:{value:e.searchInput,callback:function(t){e.searchInput=t},expression:"searchInput"}}),e._v(" "),n("el-button",{on:{click:e.search}},[e._v("搜索")])],1)]),e._v(" "),n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),align:"center",border:""}},[n("el-table-column",{attrs:{align:"center",prop:"name",label:"病人姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.name))]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"是否已缴费",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{attrs:{"active-text":"已缴费","inactive-text":"未缴费","inactive-value":"-1","active-value":"1"},on:{change:function(n){return e.changeStatus(t)}},model:{value:t.row.ifPay,callback:function(n){e.$set(t.row,"ifPay",n)},expression:"scope.row.ifPay"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"btnBox"},[n("el-button",{attrs:{size:"small"},on:{click:function(n){return e.toPay(t)}}},[e._v("查看总价")])],1)]}}])})],1)],1),e._v(" "),n("div",{staticClass:"paginationBox"},[n("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.totalPage,"page-size":e.pageSize,"current-page":e.currentPage},on:{"current-change":e.handleCurrentChange}})],1)])},staticRenderFns:[]};var E=n("VU/8")(S,z,!1,function(e){n("UCGV")},null,null).exports,$={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h1",[this._v("registerWork")])])}]};var j=n("VU/8")(null,$,!1,function(e){n("rKWg")},null,null).exports,M={data:function(){return{allPage:1,searchInput:"",ifExist:0,getTableData:0,input:"",tableData:[],filterData:[],loading2:!1,pageSize:6,currentPage:1,totalPage:1,dialogVisible:!1,changeDialogVisible:!1,options:[{value:"内科",label:"内科"},{value:"外科",label:"外科"},{value:"妇产科",label:"妇产科"},{value:"男科",label:"男科"},{value:"儿科",label:"儿科"},{value:"五官科",label:"五官科"},{value:"肿瘤科",label:"肿瘤科"},{value:"皮肤性病科",label:"皮肤性病科"},{value:"中医科",label:"中医科"},{value:"传染科",label:"传染科"}],form:{doctorName:"",office:"",patient:""}}},watch:{searchInput:function(){""===this.searchInput&&(this.tableData=this.filterData,this.totalPage=this.allPage)}},mounted:function(){this.getDoctor()},methods:{getDoctor:function(){var e=this;this.loading2=!0,c.a.Query("doctorWork").get("").then(function(t){console.log(t),e.tableData=t.results.reverse(),e.totalPage=t.results.length,e.filterData=t.results,e.allPage=t.results.length,setTimeout(function(){e.loading2=!1},1e3)}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){this.currentPage=e},addDoctor:function(){var e=this,t=c.a.Query("doctorWork");t.get("").then(function(n){e.getTableData=n.results.length;for(var o=0;o<e.getTableData;o++)if(e.form.doctorName===n.results[o].doctorName){e.$message({message:"该医生已添加！",type:"warning"}),e.ifExist=1,e.form.doctorName="",e.form.office="";break}0===e.ifExist&&(t.set("doctorName",e.form.doctorName),t.set("office",e.form.office),t.save().then(function(t){console.log(t),e.dialogVisible=!1,e.form.doctorName="",e.form.office="",e.getDoctor()}).catch(function(e){console.log(e)}))})},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},delDoctor:function(e){var t=this;this.$confirm("确认删除？").then(function(n){c.a.Query("doctorWork").destroy(e.row.objectId).then(function(e){console.log(e),t.getDoctor()}).catch(function(e){console.log(e)})}).catch(function(e){})},search:function(){var e=this,t=c.a.Query("doctorWork");t.containedIn("doctorName",[this.searchInput]),t.find().then(function(t){e.tableData=t,e.totalPage=t.length})}}},V={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.8)"}},[n("div",{staticClass:"underHeader"},[n("span",[n("el-input",{attrs:{placeholder:"请输入要搜索的医生姓名",size:"medium","prefix-icon":"el-icon-search"},model:{value:e.searchInput,callback:function(t){e.searchInput=t},expression:"searchInput"}}),e._v(" "),n("el-button",{on:{click:e.search}},[e._v("搜索")])],1)]),e._v(" "),n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),align:"center",border:""}},[n("el-table-column",{attrs:{align:"center",prop:"doctorName",label:"医生姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.doctorName))]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",prop:"office",label:"所在科室"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.office))]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",prop:"patientNum",label:"接诊病人数"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.patientNum))]}}])})],1)],1),e._v(" "),n("div",{staticClass:"paginationBox"},[n("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.totalPage,"page-size":e.pageSize,"current-page":e.currentPage},on:{"current-change":e.handleCurrentChange}})],1)])},staticRenderFns:[]};var Q=n("VU/8")(M,V,!1,function(e){n("hdO0")},"data-v-f4b0722e",null).exports,T={data:function(){return{allPage:1,searchInput:"",ifExist:0,getTableData:0,input:"",tableData:[],filterData:[],loading2:!1,pageSize:6,currentPage:1,totalPage:1,dialogVisible:!1,changeDialogVisible:!1,doctorInSameOffice:["儿科"],neike:[],waike:[],fuchanke:[],nanke:[],erke:[],wuguanke:[],zhongliuke:[],pifuxingbingke:[],zhongyike:[],chuanranke:[],jingshenke:[],form:{doctorName:"",office:""}}},watch:{searchInput:function(){""===this.searchInput&&(this.tableData=this.filterData,this.totalPage=this.allPage)}},mounted:function(){this.getDoctor(),this.getDoctorsName()},methods:{getDoctor:function(){var e=this;this.loading2=!0,c.a.Query("doctorWork").get("").then(function(t){console.log(t);for(var n=0;n<t.results.length;n++)"内科"===t.results[n].office?e.neike.push(t.results[n].doctorName):"外科"===t.results[n].office?e.waike.push(t.results[n].doctorName):"妇产科"===t.results[n].office?e.fuchanke.push(t.results[n].doctorName):"男科"===t.results[n].office?e.nanke.push(t.results[n].doctorName):"儿科"===t.results[n].office?e.erke.push(t.results[n].doctorName):"五官科"===t.results[n].office?e.wuguanke.push(t.results[n].doctorName):"肿瘤科"===t.results[n].office?e.zhongliuke.push(t.results[n].doctorName):"皮肤性病科"===t.results[n].office?e.pifuxingbingke.push(t.results[n].doctorName):"中医科"===t.results[n].office?e.zhongyike.push(t.results[n].doctorName):"传染科"===t.results[n].office?e.chuanranke.push(t.results[n].doctorName):e.jingshenke.push(t.results[n].doctorName)}).catch(function(e){console.log(e)});var t=c.a.Query("officeName");t.get("AC6tEEEQ").then(function(t){console.log(t),t.set("doctors",e.neike),t.save(),e.getDoctorsName()}).catch(function(e){console.log(e)}),t.get("da2P777s").then(function(t){console.log(t),t.set("doctors",e.waike),t.save(),e.getDoctorsName()}).catch(function(e){console.log(e)}),t.get("0E853334").then(function(t){console.log(t),t.set("doctors",e.fuchanke),t.save(),e.getDoctorsName()}).catch(function(e){console.log(e)}),t.get("NnaD222y").then(function(t){console.log(t),t.set("doctors",e.nanke),t.save(),e.getDoctorsName()}).catch(function(e){console.log(e)}),t.get("6d9pYYYb").then(function(t){console.log(t),t.set("doctors",e.erke),t.save(),e.getDoctorsName()}).catch(function(e){console.log(e)}),t.get("atEB5557").then(function(t){console.log(t),t.set("doctors",e.wuguanke),t.save(),e.getDoctorsName()}).catch(function(e){console.log(e)}),t.get("NtAL333t").then(function(t){console.log(t),t.set("doctors",e.zhongliuke),t.save(),e.getDoctorsName()}).catch(function(e){console.log(e)}),t.get("EoJT666L").then(function(t){console.log(t),t.set("doctors",e.pifuxingbingke),t.save(),e.getDoctorsName()}).catch(function(e){console.log(e)}),t.get("pyNc4445").then(function(t){console.log(t),t.set("doctors",e.zhongyike),t.save(),e.getDoctorsName()}).catch(function(e){console.log(e)}),t.get("03Wvdddi").then(function(t){console.log(t),t.set("doctors",e.chuanranke),t.save(),e.getDoctorsName()}).catch(function(e){console.log(e)}),t.get("I40cMMMb").then(function(t){console.log(t),t.set("doctors",e.jingshenke),t.save(),e.getDoctorsName()}).catch(function(e){console.log(e)})},getDoctorsName:function(){var e=this;this.loading2=!0,c.a.Query("officeName").get("").then(function(t){console.log(t),e.tableData=t.results.reverse(),e.totalPage=t.results.length,e.filterData=t.results,e.allPage=t.results.length,setTimeout(function(){e.loading2=!1},1e3)}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){this.currentPage=e},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},search:function(){var e=this,t=c.a.Query("officeName");t.containedIn("office",[this.searchInput]),t.find().then(function(t){e.tableData=t,e.totalPage=t.length})}}},R={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.8)"}},[n("div",{staticClass:"underHeader"},[n("span",{staticStyle:{margin:"0 auto"}},[n("el-input",{attrs:{placeholder:"请输入要搜索的科室",size:"medium","prefix-icon":"el-icon-search"},model:{value:e.searchInput,callback:function(t){e.searchInput=t},expression:"searchInput"}}),e._v(" "),n("el-button",{on:{click:e.search}},[e._v("搜索")])],1)]),e._v(" "),n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),align:"center",border:""}},[n("el-table-column",{attrs:{align:"center",prop:"office",label:"科室"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.office))]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",prop:"personNum",label:"科室接诊人数"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.personNum))]}}])})],1)],1),e._v(" "),n("div",{staticClass:"paginationBox"},[n("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.totalPage,"page-size":e.pageSize,"current-page":e.currentPage},on:{"current-change":e.handleCurrentChange}})],1)])},staticRenderFns:[]};var F=n("VU/8")(T,R,!1,function(e){n("dewC")},null,null).exports,B={data:function(){return{allPage:1,searchInput:"",ifExist:0,getTableData:0,input:"",tableData:[],filterData:[],loading2:!1,pageSize:6,currentPage:1,totalPage:1,dialogVisible:!1,changeDialogVisible:!1,doctorInSameOffice:["儿科"],neike:[],waike:[],fuchanke:[],nanke:[],erke:[],wuguanke:[],zhongliuke:[],pifuxingbingke:[],zhongyike:[],chuanranke:[],jingshenke:[],form:{doctorName:"",office:""}}},watch:{searchInput:function(){""===this.searchInput&&(this.tableData=this.filterData,this.totalPage=this.allPage)}},mounted:function(){this.getDoctor(),this.getDoctorsName()},methods:{getDoctor:function(){var e=this;this.loading2=!0,c.a.Query("doctorWork").get("").then(function(t){console.log(t);for(var n=0;n<t.results.length;n++)"内科"===t.results[n].office?e.neike.push(t.results[n].doctorName):"外科"===t.results[n].office?e.waike.push(t.results[n].doctorName):"妇产科"===t.results[n].office?e.fuchanke.push(t.results[n].doctorName):"男科"===t.results[n].office?e.nanke.push(t.results[n].doctorName):"儿科"===t.results[n].office?e.erke.push(t.results[n].doctorName):"五官科"===t.results[n].office?e.wuguanke.push(t.results[n].doctorName):"肿瘤科"===t.results[n].office?e.zhongliuke.push(t.results[n].doctorName):"皮肤性病科"===t.results[n].office?e.pifuxingbingke.push(t.results[n].doctorName):"中医科"===t.results[n].office?e.zhongyike.push(t.results[n].doctorName):"传染科"===t.results[n].office?e.chuanranke.push(t.results[n].doctorName):e.jingshenke.push(t.results[n].doctorName)}).catch(function(e){console.log(e)});var t=c.a.Query("officeName");t.get("AC6tEEEQ").then(function(t){console.log(t),t.set("doctors",e.neike),t.save(),e.getDoctorsName()}).catch(function(e){console.log(e)}),t.get("da2P777s").then(function(t){console.log(t),t.set("doctors",e.waike),t.save(),e.getDoctorsName()}).catch(function(e){console.log(e)}),t.get("0E853334").then(function(t){console.log(t),t.set("doctors",e.fuchanke),t.save(),e.getDoctorsName()}).catch(function(e){console.log(e)}),t.get("NnaD222y").then(function(t){console.log(t),t.set("doctors",e.nanke),t.save(),e.getDoctorsName()}).catch(function(e){console.log(e)}),t.get("6d9pYYYb").then(function(t){console.log(t),t.set("doctors",e.erke),t.save(),e.getDoctorsName()}).catch(function(e){console.log(e)}),t.get("atEB5557").then(function(t){console.log(t),t.set("doctors",e.wuguanke),t.save(),e.getDoctorsName()}).catch(function(e){console.log(e)}),t.get("NtAL333t").then(function(t){console.log(t),t.set("doctors",e.zhongliuke),t.save(),e.getDoctorsName()}).catch(function(e){console.log(e)}),t.get("EoJT666L").then(function(t){console.log(t),t.set("doctors",e.pifuxingbingke),t.save(),e.getDoctorsName()}).catch(function(e){console.log(e)}),t.get("pyNc4445").then(function(t){console.log(t),t.set("doctors",e.zhongyike),t.save(),e.getDoctorsName()}).catch(function(e){console.log(e)}),t.get("03Wvdddi").then(function(t){console.log(t),t.set("doctors",e.chuanranke),t.save(),e.getDoctorsName()}).catch(function(e){console.log(e)}),t.get("I40cMMMb").then(function(t){console.log(t),t.set("doctors",e.jingshenke),t.save(),e.getDoctorsName()}).catch(function(e){console.log(e)})},getDoctorsName:function(){var e=this;this.loading2=!0,c.a.Query("officeName").get("").then(function(t){console.log(t),e.tableData=t.results.reverse(),e.totalPage=t.results.length,e.filterData=t.results,e.allPage=t.results.length,setTimeout(function(){e.loading2=!1},1e3)}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){this.currentPage=e},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},search:function(){var e=this,t=c.a.Query("officeName");t.containedIn("office",[this.searchInput]),t.find().then(function(t){e.tableData=t,e.totalPage=t.length})}}},U={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.8)"}},[n("div",{staticClass:"underHeader"},[n("span",{staticStyle:{margin:"0 auto"}},[n("el-input",{attrs:{placeholder:"请输入要搜索的科室",size:"medium","prefix-icon":"el-icon-search"},model:{value:e.searchInput,callback:function(t){e.searchInput=t},expression:"searchInput"}}),e._v(" "),n("el-button",{on:{click:e.search}},[e._v("搜索")])],1)]),e._v(" "),n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),align:"center",border:""}},[n("el-table-column",{attrs:{align:"center",prop:"office",label:"科室"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.office))]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",prop:"doctorName",label:"医生姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.doctors.toString()))]}}])})],1)],1),e._v(" "),n("div",{staticClass:"paginationBox"},[n("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.totalPage,"page-size":e.pageSize,"current-page":e.currentPage},on:{"current-change":e.handleCurrentChange}})],1)])},staticRenderFns:[]};var W=n("VU/8")(B,U,!1,function(e){n("IDdh")},null,null).exports,O={data:function(){return{allPage:1,searchInput:"",ifExist:0,getTableData:0,input:"",tableData:[],filterData:[],loading2:!1,pageSize:6,currentPage:1,totalPage:1,dialogVisible:!1,changeDialogVisible:!1,options:[{value:"内科",label:"内科"},{value:"外科",label:"外科"},{value:"妇产科",label:"妇产科"},{value:"男科",label:"男科"},{value:"儿科",label:"儿科"},{value:"五官科",label:"五官科"},{value:"肿瘤科",label:"肿瘤科"},{value:"皮肤性病科",label:"皮肤性病科"},{value:"中医科",label:"中医科"},{value:"传染科",label:"传染科"}],form:{doctorName:"",office:""}}},watch:{searchInput:function(){""===this.searchInput&&(this.tableData=this.filterData,this.totalPage=this.allPage)}},mounted:function(){this.getDoctor()},methods:{getDoctor:function(){var e=this;this.loading2=!0,c.a.Query("doctorWork").get("").then(function(t){console.log(t),e.tableData=t.results.reverse(),e.totalPage=t.results.length,e.filterData=t.results,e.allPage=t.results.length,setTimeout(function(){e.loading2=!1},1e3)}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){this.currentPage=e},addDoctor:function(){var e=this,t=c.a.Query("doctorWork");t.get("").then(function(n){e.getTableData=n.results.length;for(var o=0;o<e.getTableData;o++)if(e.form.doctorName===n.results[o].doctorName){e.$message({message:"该医生已添加！",type:"warning"}),e.ifExist=1,e.form.doctorName="",e.form.office="";break}0===e.ifExist&&(t.set("doctorName",e.form.doctorName),t.set("office",e.form.office),t.save().then(function(t){console.log(t),e.dialogVisible=!1,e.form.doctorName="",e.form.office="",e.getDoctor()}).catch(function(e){console.log(e)}))})},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},delDoctor:function(e){var t=this;this.$confirm("确认删除？").then(function(n){c.a.Query("doctorWork").destroy(e.row.objectId).then(function(e){console.log(e),t.getDoctor()}).catch(function(e){console.log(e)})}).catch(function(e){})},search:function(){var e=this,t=c.a.Query("doctorWork");t.containedIn("doctorName",[this.searchInput]),t.find().then(function(t){e.tableData=t,e.totalPage=t.length})}}},q={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.8)"}},[n("div",{staticClass:"underHeader"},[n("el-button",{on:{click:function(t){e.dialogVisible=!0}}},[e._v("录 入")]),e._v(" "),n("el-dialog",{attrs:{title:"录入医生信息",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",[n("el-form-item",{attrs:{label:"医生姓名："}},[n("el-input",{attrs:{placeholder:"请输入医生名称",size:"medium"},model:{value:e.form.doctorName,callback:function(t){e.$set(e.form,"doctorName",t)},expression:"form.doctorName"}})],1),e._v(" "),n("el-select",{attrs:{placeholder:"请选择医生所在科室"},model:{value:e.form.office,callback:function(t){e.$set(e.form,"office",t)},expression:"form.office"}},e._l(e.options,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.addDoctor}},[e._v("录 入")]),e._v(" "),n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")])],1)],1),e._v(" "),n("span",[n("el-input",{attrs:{placeholder:"请输入要搜索的医生姓名",size:"medium","prefix-icon":"el-icon-search"},model:{value:e.searchInput,callback:function(t){e.searchInput=t},expression:"searchInput"}}),e._v(" "),n("el-button",{on:{click:e.search}},[e._v("搜索")])],1)],1),e._v(" "),n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),align:"center",border:""}},[n("el-table-column",{attrs:{align:"center",prop:"doctorName",label:"医生姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.doctorName))]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",prop:"office",label:"所在科室"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.office))]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"btnBox"},[n("el-button",{attrs:{size:"small"},on:{click:function(n){return e.delDoctor(t)}}},[e._v("删除")])],1)]}}])})],1)],1),e._v(" "),n("div",{staticClass:"paginationBox"},[n("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.totalPage,"page-size":e.pageSize,"current-page":e.currentPage},on:{"current-change":e.handleCurrentChange}})],1)])},staticRenderFns:[]};var L=n("VU/8")(O,q,!1,function(e){n("LSwd")},"data-v-5ef41f70",null).exports,H=n("mvHQ"),A=n.n(H),Y=(n("ax0m"),n("Pudk"));o.default.component("ElxEditable",Y.Editable),o.default.component("ElxEditableColumn",Y.EditableColumn);var J={data:function(){return{loading2:!1,dosePlace:!0,allData:[],tableData:{line:null,data:[{name:"",number:"",unit:"",time:"",days:"",remark:""}]},form:{name:"",sex:"",age:"",objectId:"",Date:"",office:"",doctor:"",allergy:"",phone:"",sickness:"",prescription:[]}}},mounted:function(){this.getPatient()},methods:{back:function(){this.$router.push({path:"queue"})},getPatient:function(){var e=this;this.loading2=!0,c.a.Query("patient").get(this.$route.query.patientId).then(function(t){for(var n in console.log(t),e.form.name=t.name,e.form.Date=t.createdAt,e.form.doctor=t.doctor,e.form.objectId=t.objectId,e.form.office=t.office,e.form.sex=t.sex,e.form.age=t.age,e.form.allergy=t.allergy,e.form.phone=t.phone,e.form.sickness=t.sickness,t.prescription)e.form.prescription.push("药品名称："+t.prescription[n].name+"，剂量数："+t.prescription[n].number+"，给药单位："+t.prescription[n].unit+"，开始时间："+t.prescription[n].time+"，用药天数："+t.prescription[n].days+"，医嘱备注："+t.prescription[n].remark);e.form.prescription||(e.dosePlace=!1),setTimeout(function(){e.loading2=!1},1e3),console.log(t)}).catch(function(e){console.log(e)})},addLine:function(){var e={name:"",number:"",unit:"",time:"",days:"",remark:""};this.tableData.data.push(e),this.tableData.line=JSON.parse(A()(e)),console.log("json",this.tableData.line),console.log("all",this.tableData.data)},save:function(e){console.log("save",e),console.log("index",e.$index),this.allData=JSON.parse(A()(this.tableData.data)),console.log("allData",this.allData)},delLine:function(){this.tableData.data.pop()},upload:function(){var e=this;this.form.sex&&this.form.age&&this.form.allergy&&this.form.phone&&this.form.sickness?c.a.Query("patient").get(this.$route.query.patientId).then(function(t){console.log(t),e.form.state="1",console.log("上传处方",e.allData),t.set("sex",e.form.sex),t.set("age",e.form.age),t.set("allergy",e.form.allergy),t.set("phone",e.form.phone),t.set("sickness",e.form.sickness),t.set("state",e.form.state),console.log(e.allData),0!==e.allData.length&&t.set("prescription",e.allData),t.save(),e.$router.push({path:"queue"})}).catch(function(e){console.log(e)}):this.$message({showClose:!0,message:"请完善病人病案！",type:"warning"})}}},K={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.8)"}},[n("div",{staticClass:"patientInfo"},[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",inline:""}},[n("el-form-item",{attrs:{label:"姓名"}},[n("el-input",{attrs:{disabled:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"性别"}},[n("el-input",{model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"年龄"}},[n("el-input",{model:{value:e.form.age,callback:function(t){e.$set(e.form,"age",t)},expression:"form.age"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"病历号"}},[n("el-input",{attrs:{disabled:""},model:{value:e.form.objectId,callback:function(t){e.$set(e.form,"objectId",t)},expression:"form.objectId"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"挂号时间"}},[n("el-input",{attrs:{disabled:""},model:{value:e.form.Date,callback:function(t){e.$set(e.form,"Date",t)},expression:"form.Date"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"接诊科室"}},[n("el-input",{attrs:{disabled:""},model:{value:e.form.office,callback:function(t){e.$set(e.form,"office",t)},expression:"form.office"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"接诊医生"}},[n("el-input",{attrs:{disabled:""},model:{value:e.form.doctor,callback:function(t){e.$set(e.form,"doctor",t)},expression:"form.doctor"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"过敏病史"}},[n("el-input",{model:{value:e.form.allergy,callback:function(t){e.$set(e.form,"allergy",t)},expression:"form.allergy"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"联系方式"}},[n("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1)],1),e._v(" "),n("el-form",[n("el-form-item",{attrs:{label:"病案书写"}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.form.sickness,callback:function(t){e.$set(e.form,"sickness",t)},expression:"form.sickness"}})],1)],1),e._v(" "),n("el-form",[n("el-form-item",{staticStyle:{color:"#7c7c7c"},attrs:{label:"发药单"}},[e.dosePlace?n("div",{staticClass:"textMed"},[e._v("\n    "+e._s(e.form.prescription.toString())+"\n    ")]):e._e()])],1),e._v(" "),n("elx-editable",{ref:"editable",staticClass:"inputBlock",attrs:{data:e.tableData.data},on:{"update:data":function(t){return e.$set(e.tableData,"data",t)}}},[n("elx-editable-column",{attrs:{type:"index",width:"55"}}),e._v(" "),n("elx-editable-column",{attrs:{prop:"name",label:"药品名称","edit-render":{name:"ElInput"}}}),e._v(" "),n("elx-editable-column",{attrs:{prop:"number",label:"剂量数","edit-render":{name:"ElInput"}}}),e._v(" "),n("elx-editable-column",{attrs:{prop:"unit",label:"给药单位","edit-render":{name:"ElInput"}}}),e._v(" "),n("elx-editable-column",{attrs:{prop:"time",label:"开始时间","edit-render":{name:"ElDatePicker",attrs:{type:"date",format:"yyyy-MM-dd"}}}}),e._v(" "),n("elx-editable-column",{attrs:{prop:"days",label:"用药天数","edit-render":{name:"ElInput"}}}),e._v(" "),n("elx-editable-column",{attrs:{prop:"remark",label:"医嘱备注","edit-render":{name:"ElInput"}}}),e._v(" "),n("elx-editable-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.save(t)}}},[e._v("保存")])]}}])})],1),e._v(" "),n("div",{staticClass:"allBtn"},[n("el-button",{on:{click:e.addLine}},[e._v("添加一行")]),e._v(" "),n("el-button",{on:{click:e.delLine}},[e._v("删除一行")]),e._v(" "),n("el-button",{on:{click:e.upload}},[e._v("提交处方")]),e._v(" "),n("el-button",{on:{click:e.back}},[e._v("返回")])],1)],1)},staticRenderFns:[]};var Z=n("VU/8")(J,K,!1,function(e){n("6ces")},"data-v-3ce7ccdc",null).exports,X={data:function(){return{allPage:1,searchInput:"",input:"",tableData:[],filterData:[],loading2:!1,pageSize:6,currentPage:1,totalPage:1,dialogVisible:!1,changeNum:"",patientId:"",form:{name:"",diseaseType:"",office:"",doctor:""}}},watch:{searchInput:function(){""===this.searchInput&&(this.tableData=this.filterData,this.totalPage=this.allPage)}},mounted:function(){this.getPatient()},methods:{getPatient:function(){var e=this;this.loading2=!0,c.a.Query("patient").get("").then(function(t){console.log(t),e.tableData=t.results.reverse(),e.totalPage=t.results.length,e.filterData=t.results,e.allPage=t.results.length,setTimeout(function(){e.loading2=!1},1e3)}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){this.currentPage=e},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},search:function(){var e=this,t=c.a.Query("patient");t.containedIn("doctor",[this.searchInput]),t.find().then(function(t){e.tableData=t,e.totalPage=t.length})},toWorkplace:function(e){console.log("the scope",e),this.patientId=e.row.objectId,console.log("id",this.patientId),this.$router.push({path:"workPlace",query:{patientId:this.patientId}})}}},G={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.8)"}},[n("div",{staticClass:"underHeader"},[n("span",[n("el-input",{attrs:{placeholder:"请输入医生的姓名",size:"medium","prefix-icon":"el-icon-search"},model:{value:e.searchInput,callback:function(t){e.searchInput=t},expression:"searchInput"}}),e._v(" "),n("el-button",{on:{click:e.search}},[e._v("搜索")])],1)]),e._v(" "),n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),align:"center",border:""}},[n("el-table-column",{attrs:{align:"center",prop:"name",label:"病人姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.name))]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",prop:"diseaseType",label:"疾病类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.diseaseType))]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"病历号"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.objectId))]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"就诊科室"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.office))]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"就诊医师"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.doctor))]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"挂号时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.createdAt))]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"就诊状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{attrs:{"inactive-value":"-1","active-value":"1",disabled:""},model:{value:t.row.state,callback:function(n){e.$set(t.row,"state",n)},expression:"scope.row.state"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"btnBox"},[n("el-button",{attrs:{size:"small"},on:{click:function(n){return e.toWorkplace(t)}}},[e._v("接诊")])],1)]}}])})],1)],1),e._v(" "),n("div",{staticClass:"paginationBox"},[n("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.totalPage,"page-size":e.pageSize,"current-page":e.currentPage},on:{"current-change":e.handleCurrentChange}})],1)])},staticRenderFns:[]};var ee=n("VU/8")(X,G,!1,function(e){n("bXEg")},null,null).exports;o.default.component("ElxEditable",Y.Editable),o.default.component("ElxEditableColumn",Y.EditableColumn);var te={data:function(){return{doseBtn:!0,theId:[],afterNumber:[],delMedicine:[],loading2:!1,form:{name:"",objectId:"",dose:[]}}},mounted:function(){this.getPatient()},methods:{back:function(){this.$router.push({path:"dose"})},getPatient:function(){var e=this;this.loading2=!0,c.a.Query("patient").get(this.$route.query.patientId).then(function(t){for(var n in"1"===t.ifDose&&(e.doseBtn=!1),console.log(t),e.form.name=t.name,e.form.objectId=t.objectId,t.prescription)console.log("测试",t.prescription[n].name+t.prescription[n].number+t.prescription[n].unit),e.form.dose.push(t.prescription[n].name+t.prescription[n].number+t.prescription[n].unit);e.form.dose=e.form.dose.toString(),setTimeout(function(){e.loading2=!1},1e3),console.log(t)}).catch(function(e){console.log(e)})},save:function(){var e=this,t=c.a.Query("patient");t.get(this.$route.query.patientId).then(function(t){for(var n in t.set("ifDose","1"),t.save(),console.log(t),t.prescription)console.log("删除名字",t.prescription[n].name),e.delMedicine.push(t.prescription[n].name),e.delMedicine.push(t.prescription[n].number);console.log("this.delMedicine",e.delMedicine),c.a.Query("medicine").get("").then(function(t){console.log("all medicine",t);for(var n=function(n){for(var o=0;o<t.results.length;o++){if(e.delMedicine[n]===t.results[o].medName)console.log("equal?",e.delMedicine[n]+t.results[o].medName),t.results[o].medNum=t.results[o].medNum-e.delMedicine[n+1],e.afterNumber.push(t.results[o].medNum),console.log("number",t.results[o].medNum),e.theId.push(t.results[o].objectId),console.log("id",e.theId),console.log("the result",e.delMedicine[n]+t.results[o].medNum),console.log("which?",e.theId[n/2]),console.log("medicine number",e.afterNumber),c.a.Query("medicine").get(e.theId[n/2]).then(function(t){console.log("the objectId medicine",t),t.set("medNum",e.afterNumber[n/2]),console.log("after number and medicine",e.theId),t.save(),e.theId=[]}).catch(function(e){console.log(e)})}},o=0;o<e.delMedicine.length;o++)n(o)}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}}},ne={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.8)"}},[n("div",{staticClass:"patientInfo"},[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",inline:""}},[n("el-form-item",{attrs:{label:"姓名"}},[n("el-input",{attrs:{disabled:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"病历号"}},[n("el-input",{attrs:{disabled:""},model:{value:e.form.objectId,callback:function(t){e.$set(e.form,"objectId",t)},expression:"form.objectId"}})],1),e._v(" "),n("br"),e._v(" "),n("el-form-item",{staticStyle:{color:"#7c7c7c"},attrs:{label:"发药单"}},[n("div",{staticClass:"textMedicine"},[e._v("\r\n      "+e._s(e.form.dose)+"\r\n      ")])])],1),e._v(" "),n("div",{staticClass:"twoBtn"},[e.doseBtn?n("el-button",{on:{click:e.save}},[e._v("确定发药")]):e._e(),e._v(" "),n("el-button",{on:{click:e.back}},[e._v("返回")])],1)],1)])},staticRenderFns:[]};var oe=n("VU/8")(te,ne,!1,function(e){n("Yo3H")},null,null).exports;o.default.component("ElxEditable",Y.Editable),o.default.component("ElxEditableColumn",Y.EditableColumn);var ae={data:function(){return{sum:0,theId:[],cost:[],medNumber:[],delMedicine:[],loading2:!1,form:{name:"",objectId:"",dose:[]}}},mounted:function(){this.getPatient(),this.sumUp()},methods:{getPatient:function(){var e=this;this.loading2=!0,c.a.Query("patient").get(this.$route.query.patientId).then(function(t){for(var n in console.log(t),e.form.name=t.name,e.form.objectId=t.objectId,t.prescription)console.log("测试",t.prescription[n].name+t.prescription[n].number+t.prescription[n].unit),e.form.dose.push(t.prescription[n].name+t.prescription[n].number+t.prescription[n].unit);e.form.dose=e.form.dose.toString(),setTimeout(function(){e.loading2=!1},1e3),console.log(t)}).catch(function(e){console.log(e)})},sumUp:function(){var e=this;c.a.Query("patient").get(this.$route.query.patientId).then(function(t){for(var n in console.log(t),t.prescription)e.delMedicine.push(t.prescription[n].name),e.delMedicine.push(t.prescription[n].number),e.medNumber.push(t.prescription[n].number);console.log("this.delMedicine",e.delMedicine),c.a.Query("medicine").get("").then(function(t){console.log("all medicine",t);for(var n=0;n<e.delMedicine.length;n++)for(var o=0;o<t.results.length;o++)e.delMedicine[n]===t.results[o].medName&&(console.log("equal?",e.delMedicine[n]+t.results[o].medName),e.cost.push(t.results[o].price),console.log("all price",e.cost),console.log("all medicine the patient get",e.delMedicine),console.log("all medicine number array",e.medNumber));for(var a=0;a<e.medNumber.length;a++)e.sum=parseInt(e.sum)+parseInt(e.cost[a])*parseInt(e.medNumber[a]),console.log("sum",e.sum)}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})},back:function(){this.$router.push({path:"registerPay"})}}},ie={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.8)"}},[n("div",{staticClass:"patientInfo"},[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",inline:""}},[n("el-form-item",{attrs:{label:"姓名"}},[n("el-input",{attrs:{disabled:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"病历号"}},[n("el-input",{attrs:{disabled:""},model:{value:e.form.objectId,callback:function(t){e.$set(e.form,"objectId",t)},expression:"form.objectId"}})],1),e._v(" "),n("br"),e._v(" "),n("el-form-item",{staticStyle:{color:"#7c7c7c"},attrs:{label:"发药单"}},[n("div",{staticClass:"textMedicine"},[e._v("\r\n      "+e._s(e.form.dose)+"\r\n      ")])]),e._v(" "),n("el-form-item",{staticStyle:{color:"#7c7c7c"},attrs:{label:"总价格"}},[e._v("\r\n      "+e._s(e.sum)+"元\r\n      ")])],1),e._v(" "),n("div",{staticClass:"backBtn"},[n("el-button",{on:{click:e.back}},[e._v("返回")])],1)],1)])},staticRenderFns:[]};var le=n("VU/8")(ae,ie,!1,function(e){n("qM+r")},null,null).exports,se={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]};var re=n("VU/8")({},se,!1,function(e){n("Qyp7")},null,null).exports;o.default.use(l.a);var ce=new l.a({routes:[{path:"/login",name:"login",component:f},{path:"/",name:"container",redirect:"/index",component:h,children:[{path:"management",name:"药房管理",component:b},{path:"dose",name:"门诊发药",component:y},{path:"register",name:"挂号管理",component:N},{path:"registerQuery",name:"查询统计",component:I},{path:"registerWork",name:"挂号员工作量",component:j},{path:"doctorWork",name:"医生工作量",component:Q},{path:"officeWork",name:"科室工作量",component:F},{path:"registerData",name:"基础数据",component:C},{path:"officeInfo",name:"科室信息",component:W},{path:"doctorInfo",name:"医生信息",component:L},{path:"registerPay",name:"处方缴费",component:E},{path:"workPlace",name:"工作台",component:Z},{path:"dosePlace",name:"给药台",component:oe},{path:"queue",name:"病人队列",component:ee},{path:"pay",name:"收费台",component:le},{path:"index",name:"首页",component:re}]},{path:"/hisPublic",name:"hisPublic",component:s.default}]}),ue=n("NxjZ"),de=n.n(ue);n("zlkP");o.default.use(de.a),o.default.use(ce),c.a.initialize("c939b6040b615c3a","cr1234"),o.default.prototype.Bmob=c.a,o.default.config.productionTip=!1,new o.default({el:"#app",router:ce,components:{App:i},template:"<App/>"})},O2RU:function(e,t){},Qyp7:function(e,t){},UCGV:function(e,t){},Xo8t:function(e,t){},Yo3H:function(e,t){},"ZSD/":function(e,t,n){"use strict";var o={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("\r\n     hhhhhhhhh\r\n")])},staticRenderFns:[]};t.a=o},ax0m:function(e,t){},bXEg:function(e,t){},"c+o/":function(e,t){},dewC:function(e,t){},e491:function(e,t){},hdO0:function(e,t){},k7vy:function(e,t){},"qM+r":function(e,t){},rKWg:function(e,t){},sjsR:function(e,t,n){"use strict";var o=n("zpyh"),a=n.n(o),i=n("ZSD/");var l=function(e){n("7SR+")},s=n("VU/8")(a.a,i.a,!1,l,null,null);t.default=s.exports},uZaE:function(e,t){},zlkP:function(e,t){},zpyh:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.2228d4b00cddb3c3ad2b.js.map